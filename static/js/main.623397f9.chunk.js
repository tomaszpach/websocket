(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){},109:function(e,t,a){},111:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),c=a.n(s),l=a(41),i=a(26),o=a(33),u={url:"https://api.bitbay.net/rest/trading/orderbook/",currency:"BTC-PLN",response:{}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_API":return Object(o.a)({},e,{response:Object(o.a)({},t.response),highestBid:t.response.data.buy[0].ra,lowestBid:t.response.data.sell[0].ra});case"UPDATE_WEBSOCKET":return Object(o.a)({},e,{highestBid:t.bids.highestBid,lowestBid:t.bids.lowestAsk});case"CHANGE_CURRENCY":return Object(o.a)({},e,{currency:t.currency});default:return e}},p=(a(107),a(23)),m=a(24),d=a(27),E=a(25),b=a(28),y=(a(109),a(111),a(94)),f=a.n(y),v=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"fetchApi",value:function(){var e=this;f.a.get(this.props.state.url+this.props.state.currency).then(function(t){e.props.fetchApi(t)}).catch(function(e){})}},{key:"websocket",value:function(){var e=this,t=new WebSocket("wss://api2.bitbay.net/websocket/");t.onopen=function(){t.send('{"action": "subscribe-public", "module": "trading", "path": "ticker"}')},t.onmessage=function(t){var a=t.data,n=JSON.parse(a);n.hasOwnProperty("message")&&n.message.market.code===e.props.state.currency&&e.props.updateWebsocket(n.message)}}},{key:"componentDidMount",value:function(){this.fetchApi(),this.websocket()}},{key:"componentDidUpdate",value:function(e){e.state.currency!==this.props.state.currency&&(this.fetchApi(),this.websocket())}},{key:"render",value:function(){return null}}]),t}(n.Component),g=Object(i.b)(function(e){return{state:e}},function(e){return{fetchApi:function(t){e({type:"FETCH_API",response:t})},updateWebsocket:function(t){e({type:"UPDATE_WEBSOCKET",bids:t})}}})(v),w=function(){return r.a.createElement("h2",null,"Booty Bay")},C=a(95),N=a.n(C),B=a(96),O=a.n(B),k=a(97),P=a.n(k),j=a(20),A=a.n(j),S=function(e){var t=e.currency,a=e.onChange;return r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(O.a,{htmlFor:"currency-simple"},"Waluta"),r.a.createElement(P.a,{value:t,onChange:function(e){return a(e)},inputProps:{name:"currency",id:"currency-simple"}},r.a.createElement(A.a,{value:"BTC-PLN"},"BTC-PLN"),r.a.createElement(A.a,{value:"ETH-PLN"},"ETH-PLN"),r.a.createElement(A.a,{value:"LSK-PLN"},"LSK-PLN"),r.a.createElement(A.a,{value:"LTC-PLN"},"LTC-PLN"),r.a.createElement(A.a,{value:"GAME-PLN"},"GAME-PLN"),r.a.createElement(A.a,{value:"DASH-PLN"},"DASH-PLN"))))},L=function(e){var t=e.response,a=e.currency,n=e.buySell;if(t.hasOwnProperty("data")){var s,c,l,i=a.split("-");"buy"===n?(s=t.data.buy,c="Oferty skupu - ",l="BID"):(s=t.data.sell,c="Oferty sprzeda\u017cy - ",l="ASK");var o=s.slice(0,10).map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.ra),r.a.createElement("td",null,e.pa),r.a.createElement("td",null,(e.ra*e.pa).toFixed(2)))});return r.a.createElement("div",{className:"orderbook "+l},r.a.createElement("h4",null,c,r.a.createElement("span",null,l)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"table-head"},r.a.createElement("th",null,"Kurs"),r.a.createElement("th",null,"Ilo\u015b\u0107 ",r.a.createElement("span",null,i[0])),r.a.createElement("th",null,"Suma ",r.a.createElement("span",null,i[1]))),o))))}return r.a.createElement("h2",null,"Fetching data from API")},T=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.state,t=e.currency,a=e.response;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement(L,{buySell:"buy",response:a,currency:t})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement(L,{buySell:"sell",response:a,currency:t})))}}]),t}(n.Component),D=function(e){var t=e.highestBid,a=e.lowestBid,n=e.highestClass,s=e.lowestClass;return r.a.createElement("div",{className:"buy-sell"},r.a.createElement("p",{className:"buy"},r.a.createElement("b",null,"SKUP \u2022 BID: "),r.a.createElement("span",{className:n},t)),r.a.createElement("p",{className:"sell"},r.a.createElement("b",null,"SPRZEDA\u017b \u2022 ASK: "),r.a.createElement("span",{className:s},a)))},H=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={lowestClass:"",highestClass:""},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"changeCurrency",value:function(e){var t=e.target.value;this.props.changeCurrencyR(t)}},{key:"componentDidUpdate",value:function(e){var t=this;e.highestBid!==this.props.highestBid&&this.setState({highestClass:"updated"},function(){return setTimeout(function(){t.setState({highestClass:""})},200)}),e.lowestBid!==this.props.lowestBid&&this.setState({lowestClass:"updated"},function(){return setTimeout(function(){t.setState({lowestClass:""})},200)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(g,null),r.a.createElement(w,null),r.a.createElement(S,{currency:this.props.currency,onChange:function(t){return e.changeCurrency(t)}}),r.a.createElement(D,{highestBid:this.props.highestBid,lowestBid:this.props.lowestBid,highestClass:this.state.highestClass,lowestClass:this.state.lowestClass}),r.a.createElement(T,{state:this.props}))}}]),t}(n.Component),K=Object(i.b)(function(e){return{currency:e.currency,response:e.response,highestBid:e.highestBid,lowestBid:e.lowestBid}},function(e){return{changeCurrencyR:function(t){e({type:"CHANGE_CURRENCY",currency:t})}}})(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=Object(l.b)(h);c.a.render(r.a.createElement(i.a,{store:W},r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},98:function(e,t,a){e.exports=a(264)}},[[98,2,1]]]);
//# sourceMappingURL=main.623397f9.chunk.js.map