(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){},109:function(e,t,n){},111:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),s=n.n(c),l=n(41),o=n(26),u=n(33),i={url:"https://api.bitbay.net/rest/trading/orderbook/",currency:"BTC-PLN",response:{}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"FETCH_API":return Object(u.a)({},e,{response:Object(u.a)({},t.response),highestBid:t.response.data.buy[0].ra,lowestBid:t.response.data.sell[0].ra});case"UPDATE_WEBSOCKET":return Object(u.a)({},e,{highestBid:t.bids.highestBid,lowestBid:t.bids.lowestAsk});case"CHANGE_CURRENCY":return Object(u.a)({},e,{currency:t.currency});default:return e}},m=(n(107),n(23)),h=n(24),d=n(27),E=n(25),b=n(28),y=(n(109),n(111),n(94)),f=n.n(y),v=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"fetchApi",value:function(){var e=this;f.a.get(this.props.state.url+this.props.state.currency).then(function(t){e.props.fetchApi(t)}).catch(function(e){})}},{key:"websocket",value:function(){var e=this,t=new WebSocket("wss://api2.bitbay.net/websocket/");t.onopen=function(){t.send('{"action": "subscribe-public", "module": "trading", "path": "ticker"}')},t.onmessage=function(t){var n=t.data,a=JSON.parse(n);a.hasOwnProperty("message")&&a.message.market.code===e.props.state.currency&&(e.props.updateWebsocket(a.message),console.log(a)),e.setState({parsedData:a})}}},{key:"componentDidMount",value:function(){this.fetchApi(),this.websocket()}},{key:"componentDidUpdate",value:function(e){e.state.currency!==this.props.state.currency&&(this.fetchApi(),this.websocket())}},{key:"render",value:function(){return null}}]),t}(a.Component),g=Object(o.b)(function(e){return{state:e}},function(e){return{fetchApi:function(t){e({type:"FETCH_API",response:t})},updateWebsocket:function(t){e({type:"UPDATE_WEBSOCKET",bids:t})}}})(v),w=function(e){e.currency;return r.a.createElement("h2",null,"Booty Bay")},N=n(95),O=n.n(N),k=n(96),B=n.n(k),C=n(97),P=n.n(C),j=n(20),A=n.n(j),L=function(e){var t=e.currency,n=e.onChange;return r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(B.a,{htmlFor:"currency-simple"},"Waluta"),r.a.createElement(P.a,{value:t,onChange:function(e){return n(e)},inputProps:{name:"currency",id:"currency-simple"}},r.a.createElement(A.a,{value:"BTC-PLN"},"BTC-PLN"),r.a.createElement(A.a,{value:"ETH-PLN"},"ETH-PLN"),r.a.createElement(A.a,{value:"LSK-PLN"},"LSK-PLN"),r.a.createElement(A.a,{value:"LTC-PLN"},"LTC-PLN"),r.a.createElement(A.a,{value:"GAME-PLN"},"GAME-PLN"),r.a.createElement(A.a,{value:"DASH-PLN"},"DASH-PLN"))))},S=function(e){var t=e.response,n=e.currency,a=e.buySell;if(t.hasOwnProperty("data")){var c,s,l,o=n.split("-");"buy"===a?(c=t.data.buy,s="Oferty skupu - ",l="BID"):(c=t.data.sell,s="Oferty sprzeda\u017cy - ",l="ASK");var u=c.map(function(e,t){if(t<=10)return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.ra),r.a.createElement("td",null,e.pa),r.a.createElement("td",null,(e.ra*e.pa).toFixed(2)))});return r.a.createElement("div",{className:"orderbook "+l},r.a.createElement("h4",null,s,r.a.createElement("span",null,l)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"table-head"},r.a.createElement("th",null,"Kurs"),r.a.createElement("th",null,"Ilo\u015b\u0107 ",r.a.createElement("span",null,o[0])),r.a.createElement("th",null,"Suma ",r.a.createElement("span",null,o[1]))),u))))}return r.a.createElement("h2",null,"Fetching data from API")},T=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.state,t=e.currency,n=e.response;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement(S,{buySell:"buy",response:n,currency:t})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement(S,{buySell:"sell",response:n,currency:t})))}}]),t}(a.Component),D=function(e){var t=e.highestBid,n=e.lowestBid;return r.a.createElement("div",{className:"buy-sell"},r.a.createElement("p",{className:"buy"},r.a.createElement("b",null,"SKUP \u2022 BID: "),r.a.createElement("span",null,t)),r.a.createElement("p",{className:"sell"},r.a.createElement("b",null,"SPRZEDA\u017b \u2022 ASK: "),r.a.createElement("span",null,n)))},H=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"changeCurrency",value:function(e){var t=e.target.value;this.props.changeCurrencyR(t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(g,null),r.a.createElement(w,{currency:this.props.currency}),r.a.createElement(L,{currency:this.props.currency,onChange:function(t){return e.changeCurrency(t)}}),r.a.createElement(D,{highestBid:this.props.highestBid,lowestBid:this.props.lowestBid}),r.a.createElement(T,{state:this.props}))}}]),t}(a.Component),K=Object(o.b)(function(e){return{currency:e.currency,response:e.response,highestBid:e.highestBid,lowestBid:e.lowestBid}},function(e){return{changeCurrencyR:function(t){e({type:"CHANGE_CURRENCY",currency:t})}}})(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=Object(l.b)(p);s.a.render(r.a.createElement(o.a,{store:W},r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},98:function(e,t,n){e.exports=n(264)}},[[98,2,1]]]);
//# sourceMappingURL=main.98794388.chunk.js.map